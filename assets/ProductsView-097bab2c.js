import{m as y,f as x,r as k,o as c,c as l,a as t,j as p,v as _,g as u,F as h,k as m,l as C,e as P,t as n,b as w,w as S}from"./index-9ca22d87.js";import{c as g}from"./cart-6073514a.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const{VITE_URL:b,VITE_PATH:v}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"test8283",BASE_URL:"/headphone/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T={inject:["currency"],data(){return{products:[],categories:[],filtertype:[],selectedSort:"價格高到低",selectedCategory:"全部",minPrice:null,maxPrice:null}},methods:{getProducts(){this.$http.get(`${b}/api/${v}/products/all`).then(o=>{this.products=o.data.products,this.getCategories()}).catch(o=>console.dir(o))},getCategories(){const o=[...new Set(this.products.map(e=>e.category))];this.categories=o},filterCategories(o){const e=this.products.filter(r=>r.category===o);console.log(e),this.filtertype=e},addToCart(o,e=1){const r={product_id:o,qty:e};this.$http.post(`${b}/api/${v}/cart`,{data:r}).then(d=>{console.log(d.data),this.getCart()}).catch(d=>console.log(d.data))},...y(g,["getCart"])},components:{},mounted(){this.getProducts()},computed:{...x(g,["carts"]),filteredProducts(){let o=this.selectedCategory==="全部"?this.products:this.products.filter(e=>e.category===this.selectedCategory);return this.minPrice!==null&&(o=o.filter(e=>e.price>=this.minPrice)),this.maxPrice!==null&&(o=o.filter(e=>e.price<=this.maxPrice)),this.selectedSort==="價格高到低"?o.sort((e,r)=>r.price-e.price):this.selectedSort==="價格低到高"?o.sort((e,r)=>e.price-r.price):o}}},E=t("div",{class:"banner-img",style:{height:"500px","background-image":"url('/src/assets/img/products-banner.jpg')"}},null,-1),R={class:"container py-8"},U={class:"row gx-4 gy-3"},L={class:"col-md-4 col-12"},D={class:"p-3 bg-primary bg-opacity-25 rounded-3 position-sticky",style:{top:"12%"}},N=t("h3",{class:"mb-4"},"商品篩選",-1),A={class:"mb-4 d-md-block d-none"},B=t("h4",{class:"mb-2"},"價格",-1),I={class:"d-flex gap-3"},M=t("span",null,"-",-1),j=t("h4",{class:"mb-2"},"商品類型",-1),F={class:"px-3 d-md-block d-none"},H={class:"mb-1"},O=["onClick"],q=P('<select class="d-md-none d-block w-100 p-2 border border-dark rounded-3 bg-primary bg-opacity-50"><option value="">全部</option><option value="">[無線]耳罩式耳機</option><option value="">[有線]耳罩式耳機</option><option value="">[有線]耳塞式耳機</option><option value="">[無線]耳塞式耳機</option><option value="">主動式消噪耳機</option><option value="">監聽耳機</option></select>',1),z={class:"col-md-8 col-12"},G={class:"row gy-2 border-bottom border-dark-subtle align-items-center py-2 px-md-0 px-3"},J={class:"col-md-4 col-12"},K=t("option",{value:"價格低到高"},"價格低到高",-1),Q=t("option",{value:"價格高到低"},"價格高到低",-1),W=[K,Q],X=t("div",{class:"col-md-8 col-12"},[t("h4",null,"[無線]耳罩式耳機")],-1),Y={class:"row gy-4 py-4"},Z={style:{position:"relative",background:"#f1f1f1"}},$=["src"],tt=["onClick"],et={class:"card-body d-flex flex-column"},ot={class:"mb-2 text-title"},st={class:"text-text mb-2 fs-6"},it={class:"d-flex align-items-center gap-3 mt-auto mb-2"},rt={class:"text-title text-muted fs-6"},ct={class:"text-title fs-6"};function lt(o,e,r,d,i,a){const f=k("RouterLink");return c(),l("main",null,[E,t("div",R,[t("div",U,[t("div",L,[t("div",D,[N,t("div",A,[B,t("div",I,[t("div",null,[p(t("input",{class:"w-100 border-bottom border-dark bg-transparent p-2",type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>i.minPrice=s),placeholder:"最低"},null,512),[[_,i.minPrice]])]),M,t("div",null,[p(t("input",{class:"w-100 border-bottom border-dark bg-transparent p-2",type:"number","onUpdate:modelValue":e[1]||(e[1]=s=>i.maxPrice=s),placeholder:"最高"},null,512),[[_,i.maxPrice]])])])]),t("div",null,[j,t("ul",F,[t("li",H,[t("a",{href:"#",onClick:e[2]||(e[2]=u(()=>i.selectedCategory="全部",["prevent"]))},"全部")]),(c(!0),l(h,null,m(i.categories,s=>(c(),l("li",{class:"mb-1",key:s},[t("a",{href:"#",onClick:u(()=>i.selectedCategory=s,["prevent"])},n(s),9,O)]))),128))]),q])])]),t("div",z,[t("div",G,[t("div",J,[p(t("select",{class:"w-100 p-2 border border-dark rounded-3 bg-primary bg-opacity-50","onUpdate:modelValue":e[3]||(e[3]=s=>i.selectedSort=s)},W,512),[[C,i.selectedSort]])]),X]),t("div",Y,[(c(!0),l(h,null,m(a.filteredProducts,s=>(c(),l("div",{class:"col-lg-4 col-md-6 col-12",key:s.id},[w(f,{to:`/product/${s.id}`,class:"card overflow-hidden"},{default:S(()=>[t("div",Z,[t("img",{src:s.imageUrl,class:"card-img-top",alt:""},null,8,$),t("button",{type:"button",onClick:u(()=>a.addToCart(s.id),["prevent"]),class:"btn btn-primary text-white position-absolute bottom-0 end-0 card-button"}," 加入購物車 ",8,tt)]),t("div",et,[t("h4",ot,n(s.title),1),t("h4",st,n(s.description1),1),t("div",it,[t("del",rt,"NT$ "+n(a.currency(s.origin_price)),1),t("p",ct," NT$ "+n(a.currency(s.price)),1)])])]),_:2},1032,["to"])]))),128))])])])])])}const pt=V(T,[["render",lt]]);export{pt as default};

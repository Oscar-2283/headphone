import{T as v}from"./toast-4e98822e.js";import{_ as y,r as _,o as i,b as a,d as e,t as l,f as t,g,F as V,e as x,n as h,k}from"./index-195b70bc.js";const{VITE_URL:p,VITE_PATH:b}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"test8283",BASE_URL:"/headphone/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},w={inject:["currency","date"],data(){return{order:{user:"",address:"",email:"",name:"",tel:"",paymethod:""}}},methods:{getOrder(){this.$http.get(`${p}/api/${b}/order/${this.$route.params.id}`).then(r=>{const{order:d}=r.data;this.order=d}).catch(r=>alert(r.response.data.message))},payOrder(){this.$http.post(`${p}/api/${b}/pay/${this.$route.params.id}`).then(()=>{v.fire({icon:"success",title:"付款成功",width:250}),this.$router.push(`/cart/checkOut/${this.$route.params.id}`)}).catch(r=>alert(r.response.data.message))}},mounted(){this.getOrder()}},E={class:"row g-5 mt-2"},O={class:"col-lg-8 col-12"},T={class:"border border-dark-subtle p-5 bg-white"},q=e("h3",{class:"mb-4"},"訂單資訊",-1),F={class:"orderList"},S=e("p",null,"訂單編號",-1),U=e("p",null,"訂單日期",-1),L=e("p",null,"email",-1),R=e("p",null,"收件人姓名",-1),B=e("p",null,"收件人電話",-1),C=e("p",null,"收件地址",-1),D=e("p",{class:"align-middle"},"訂單金額",-1),I={class:"align-middle"},P=e("p",null,"備註",-1),A={class:"col"},M={class:"row gx-5 mt-4"},N=e("h3",{class:"mb-4"},"付款資訊",-1),j=e("div",{class:"col-md-6 col-12"},[e("h4",null,"付款方式")],-1),H={class:"col-md-6 col-12"},z={class:"form-control d-flex"},G=e("label",{class:"form-check-label ms-2 w-100",for:"cod"}," 貨到付款 ",-1),J={class:"form-control mt-4 d-flex"},K=e("label",{class:"form-check-label ms-2 w-100",for:"credit"}," 信用卡 ",-1),Q={key:0,class:"row gx-5 mt-4"},W={class:"mb-3 col-md-6 col-12"},X=e("label",{for:"credit-number",class:"form-label"},"號碼",-1),Y={class:"mb-3 col-md-6 col-12"},Z=e("label",{for:"credit-last",class:"form-label"},"後三碼",-1),$=e("div",{class:"mt-4 text-end"},[e("button",{type:"submit",class:"btn btn-outline-primary"}," 確認付款 ")],-1),ee={class:"col-lg-4 col-12"},se={class:"border border-dark-subtle p-5 bg-white"},le=e("div",{class:"d-flex justify-content-between w-100"},[e("h3",null,"訂購商品")],-1),oe={class:"mt-4"},te={class:"col-3 p-0"},re=["src","alt"],de={class:"ms-auto"};function ce(r,d,ne,ie,s,c){const n=_("VField"),m=_("ErrorMessage"),f=_("VForm");return i(),a("div",E,[e("div",O,[e("div",T,[q,e("ul",F,[e("li",null,[S,e("p",null,l(s.order.id),1)]),e("li",null,[U,e("p",null,l(c.date(s.order.create_at)),1)]),e("li",null,[L,e("p",null,l(s.order.user.email),1)]),e("li",null,[R,e("p",null,l(s.order.user.name),1)]),e("li",null,[B,e("p",null,l(s.order.user.tel),1)]),e("li",null,[C,e("p",null,l(s.order.user.address),1)]),e("li",null,[D,e("h3",I,l(c.currency(s.order.total))+" 元",1)]),e("li",null,[P,e("p",A,l(s.order.message),1)])]),t(f,{onSubmit:c.payOrder},{default:g(({errors:o})=>[e("div",M,[N,j,e("div",H,[e("div",z,[t(n,{class:"form-check-input",type:"radio",name:"pay",id:"cod",value:"貨到付款",rules:"required",modelValue:s.order.paymethod,"onUpdate:modelValue":d[0]||(d[0]=u=>s.order.paymethod=u),checked:""},null,8,["modelValue"]),G]),e("div",J,[t(n,{class:"form-check-input",type:"radio",name:"pay",id:"credit",value:"信用卡",modelValue:s.order.paymethod,"onUpdate:modelValue":d[1]||(d[1]=u=>s.order.paymethod=u)},null,8,["modelValue"]),K])])]),s.order.paymethod==="信用卡"?(i(),a("div",Q,[e("div",W,[X,t(n,{type:"number",class:h(["form-control",{"is-invalid":o.號碼}]),name:"號碼",id:"credit-number",placeholder:"8163421927531021",rules:"required|min:16|max:16|numeric",required:""},null,8,["class"]),t(m,{name:"號碼",class:"invalid-feedback"})]),e("div",Y,[Z,t(n,{type:"number",class:h(["form-control",{"is-invalid":o.後三碼}]),name:"後三碼",id:"credit-last",placeholder:"188",rules:"required|min:3|max:3|numeric",required:""},null,8,["class"]),t(m,{name:"後三碼",class:"invalid-feedback"})])])):k("",!0),$]),_:1},8,["onSubmit"])])]),e("div",ee,[e("div",se,[le,e("div",oe,[e("ul",null,[(i(!0),a(V,null,x(s.order.products,o=>(i(),a("li",{class:"d-flex gap-4 align-items-center",key:o.id},[e("div",te,[e("img",{style:{"border-radius":"8px"},src:o.product.imageUrl,alt:o.product.title},null,8,re)]),e("div",null,[e("h4",null,l(o.product.title),1),e("p",null,"$"+l(c.currency(o.final_total)),1)]),e("div",de,"x"+l(o.qty),1)]))),128))])])])])])}const _e=y(w,[["render",ce]]);export{_e as default};
